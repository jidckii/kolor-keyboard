# kolor-keyboard configuration
# Keychron V3 ANSI Encoder - Vial firmware, Draw mode (per-key RGB)
# Draws country flags on keyboard

device:
  vendor_id: 0x3434
  product_id: 0x0331
  usage_page: 0xFF60
  usage: 0x61

firmware: vial
mode: draw

brightness: 128  # 0-255
speed: 128       # 0-255

# LED layout for Keychron V3 ANSI Encoder (87 LEDs)
keyboard:
  rows:
    # Row 0: ESC, F1-F12, PrintScr, Pause, Delete (16 LEDs: 0-15)
    - [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
    # Row 1: ~, 1-0, -, =, Backspace, Insert, Home, PgUp (17 LEDs: 16-32)
    - [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
    # Row 2: Tab, Q-P, [, ], \, Delete, End, PgDn (17 LEDs: 33-49)
    - [33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]
    # Row 3: Caps, A-L, ;, ', Enter (13 LEDs: 50-62)
    - [50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62]
    # Row 4: LShift, Z-M, comma, period, /, RShift, Up (13 LEDs: 63-75)
    - [63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75]
    # Row 5: Ctrl, Win, Alt, Space, Alt, Fn, Ctrl, Left, Down, Right (11 LEDs: 76-86)
    - [76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86]

draw:
  # Russia flag: White / Blue / Red
  - layout: ru
    stripes:
      - rows: [0, 1]
        color: {rgb: {r: 255, g: 255, b: 255}}
      - rows: [2, 3]
        color: {rgb: {r: 0, g: 50, b: 255}}
      - rows: [4, 5]
        color: {rgb: {r: 255, g: 0, b: 0}}

  # USA flag: blue canton + red/white stripes
  - layout: us
    stripes:
      # Blue canton (upper left corner)
      - leds: [0, 1, 2, 3, 4, 5, 6]
        color: {hsv: {h: 170, s: 255, v: 180}}
      - leds: [16, 17, 18, 19, 20, 21, 22]
        color: {hsv: {h: 170, s: 255, v: 180}}
      - leds: [33, 34, 35, 36, 37, 38, 39]
        color: {hsv: {h: 170, s: 255, v: 180}}

      # Red stripes
      - leds: [7, 8, 9, 10, 11, 12, 13, 14, 15]
        color: {rgb: {r: 255, g: 0, b: 0}}
      - leds: [40, 41, 42, 43, 44, 45, 46, 47, 48, 49]
        color: {rgb: {r: 255, g: 0, b: 0}}
      - rows: [4]
        color: {rgb: {r: 255, g: 0, b: 0}}

      # White stripes
      - leds: [23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
        color: {hsv: {h: 0, s: 0, v: 255}}
      - rows: [3]
        color: {rgb: {r: 255, g: 255, b: 255}}
      - rows: [5]
        color: {rgb: {r: 255, g: 255, b: 255}}

  # Fallback - green
  - layout: "*"
    stripes:
      - rows: [0, 1, 2, 3, 4, 5]
        color: {hsv: {h: 85, s: 255, v: 255}}
