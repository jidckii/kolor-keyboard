# LED Map для Keychron V3 ANSI Encoder

Маппинг LED индексов для Keychron V3 ANSI с энкодером (87 LED).

## Общая информация

- **Всего LED**: 87 (индексы 0-86)
- **Рядов**: 6
- **Прошивка**: Vial QMK

## Маппинг по рядам

### Row 0: Function row (16 LED)
```
LED:  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15
Key: ESC  F1   F2   F3   F4   F5   F6   F7   F8   F9  F10  F11  F12  PrtSc Mute Light
```

### Row 1: Number row (17 LED)
```
LED: 16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32
Key:  ~    1    2    3    4    5    6    7    8    9    0    -    =  Bksp  Ins Home PgUp
```

### Row 2: QWERTY row (17 LED)
```
LED: 33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49
Key: Tab   Q    W    E    R    T    Y    U    I    O    P    [    ]    \   Del  End PgDn
```

### Row 3: Home row (13 LED)
```
LED: 50   51   52   53   54   55   56   57   58   59   60   61   62
Key: Caps  A    S    D    F    G    H    J    K    L    ;    '  Enter
```

### Row 4: Shift row (13 LED)
```
LED: 63   64   65   66   67   68   69   70   71   72   73   74   75
Key: LSft  Z    X    C    V    B    N    M    ,    .    /  RSft  Up
```

### Row 5: Control row (11 LED)
```
LED: 76   77   78   79   80   81   82   83   84   85   86
Key: LCtl LWin LAlt      Space      RAlt RWin  Fn  RCtl Left Down Right
```

## Визуальная карта

```
┌─────┬────┬────┬────┬────┬────┬────┬────┬────┬────┬────┬────┬────┬─────┬────┬────┐
│  0  │  1 │  2 │  3 │  4 │  5 │  6 │  7 │  8 │  9 │ 10 │ 11 │ 12 │  13 │ 14 │ 15 │
│ ESC │ F1 │ F2 │ F3 │ F4 │ F5 │ F6 │ F7 │ F8 │ F9 │F10 │F11 │F12 │PrtSc│Mute│Lite│
├─────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼─────┼────┼────┼────┐
│ 16  │ 17 │ 18 │ 19 │ 20 │ 21 │ 22 │ 23 │ 24 │ 25 │ 26 │ 27 │ 28 │  29 │ 30 │ 31 │ 32 │
│  ~  │  1 │  2 │  3 │  4 │  5 │  6 │  7 │  8 │  9 │  0 │  - │  = │Bksp │Ins │Home│PgUp│
├─────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼─────┼────┼────┼────┤
│ 33  │ 34 │ 35 │ 36 │ 37 │ 38 │ 39 │ 40 │ 41 │ 42 │ 43 │ 44 │ 45 │  46 │ 47 │ 48 │ 49 │
│ Tab │  Q │  W │  E │  R │  T │  Y │  U │  I │  O │  P │  [ │  ] │  \  │Del │End │PgDn│
├─────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┴─────┼────┴────┴────┤
│ 50  │ 51 │ 52 │ 53 │ 54 │ 55 │ 56 │ 57 │ 58 │ 59 │ 60 │ 61 │    62    │              │
│Caps │  A │  S │  D │  F │  G │  H │  J │  K │  L │  ; │  ' │  Enter   │              │
├─────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┴────┬─────┼─────┐        │
│ 63  │ 64 │ 65 │ 66 │ 67 │ 68 │ 69 │ 70 │ 71 │ 72 │ 73 │   74    │  75 │     │        │
│LSft │  Z │  X │  C │  V │  B │  N │  M │  , │  . │  / │  RSft   │ Up  │     │        │
├─────┼────┼────┼────┴────┴────┴────┴────┴────┼────┼────┼────┬────┼─────┼─────┼────────┤
│ 76  │ 77 │ 78 │            79               │ 80 │ 81 │ 82 │ 83 │  84 │  85 │   86   │
│LCtl │Win │Alt │          Space              │Alt │ Fn │Win │RCtl│Left │Down │ Right  │
└─────┴────┴────┴─────────────────────────────┴────┴────┴────┴────┴─────┴─────┴────────┘
```

## Использование в конфигурации

### По рядам
```yaml
keyboard:
  rows:
    - [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]           # Row 0
    - [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]  # Row 1
    - [33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]  # Row 2
    - [50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62]             # Row 3
    - [63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75]             # Row 4
    - [76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86]                     # Row 5
```

### Примеры выборок
```yaml
# Левая часть клавиатуры (для синего угла флага США)
# Row 0: ESC-F6
leds: [0, 1, 2, 3, 4, 5, 6]

# Row 1: ~-6
leds: [16, 17, 18, 19, 20, 21, 22]

# Row 2: Tab-Y
leds: [33, 34, 35, 36, 37, 38, 39]
```

## Как определить маппинг для другой клавиатуры

Используй утилиту `led-test`:

```bash
go build -o led-test ./cmd/led-test

# Для Keychron V3 (по умолчанию)
./led-test

# Для другой клавиатуры (укажи свои VID/PID)
./led-test -vid 0x3434 -pid 0x0331 -usage-page 0xFF60 -usage 0x61

# Начать с определённого LED
./led-test -start 50
```

Утилита автоматически определяет количество LED на клавиатуре.

### Команды:
| Команда | Описание |
|---------|----------|
| `Enter` или `n` | Следующий LED |
| `p` | Предыдущий LED |
| `ЧИСЛО` | Зажечь конкретный LED (например `42`) |
| `ДИАПАЗОН` | Зажечь диапазон (например `0-15`) |
| `СПИСОК` | Зажечь список (например `16,17,18,19`) |
| `a` | Зажечь все LED |
| `q` | Выход |

### Процесс маппинга:
1. Запусти `led-test`
2. Нажимай Enter, чтобы переключаться между LED
3. Записывай какой индекс соответствует какой клавише
4. Группируй LED по рядам клавиатуры
5. Создай свой конфиг на основе `keychron_v3_vial_flags.yaml`
